# v1.9.7 更新日志

发布日期：2025-12-21

## 🐛 修复

### 文件排序修复
- **修复自然排序类型比较错误**：修复文件列表排序时出现的 `'>' not supported between instances of 'str' and 'int'` 错误，优化 `_natural_sort_key` 方法使用元组确保类型安全

### 超分倍率解析修复
- **支持多种超分倍率格式**：修复加载 JSON 时超分倍率解析错误，现在支持：
  - 数字格式：`2`, `3`, `4`
  - 字符串数字：`"2"`, `"3"`, `"4"`
  - MangaJaNai 格式：`"x2"`, `"x4"`, `"DAT2 x4"`
  - RealCUGAN 格式：`"2x-conservative"`, `"3x-denoise1x"` 等
- **新增 parse_upscale_ratio 辅助函数**：统一处理超分倍率解析，避免字符串与数字运算错误
- **增强错误追踪**：添加详细的错误堆栈信息，便于快速定位问题

### 线程池清理
- **改进线程池清理机制**：为缩略图加载线程池添加 shutdown 函数，在应用关闭时正确清理线程池资源，防止资源泄漏警告
